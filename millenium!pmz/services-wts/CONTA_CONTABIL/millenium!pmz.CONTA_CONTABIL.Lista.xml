<?xml version="1.0"?>
<root>
  <OBJECT NAME="CONTA_CONTABIL">
    <METHOD NAME="Lista" DESCRIPTION="Listar Contas Cont&#225;beis" VERSION="73" INTFTYPE="5" THREADSAFE="1">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="SINTETICA" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="3" FIELDLABEL="Sint&#233;tica" CTAB="0"/>
        <PARAM NAME="CONTA_DRE" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="2" LOOKUP="millenium.CONTA_DRE.LISTA" LOOKUPKEY="CONTA_DRE" LOOKUPDISPLAY="DESCRICAO" LOOKUPCODE="CODIGO" FIELDLABEL="Conta Dre" CTAB="0"/>
        <PARAM NAME="CONTA_BALANCO" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="1" LOOKUP="millenium.CONTA_BALANCO.LISTA" LOOKUPKEY="CONTA_BALANCO" LOOKUPDISPLAY="DESCRICAO" LOOKUPCODE="CODIGO" FIELDLABEL="Conta Balan&#231;o" CTAB="0"/>
        <PARAM NAME="DEMONSTRATIVO" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="4" LOOKUP="list:'1','Balan&#231;o';'2','DRE';" FIELDLABEL="Demonstrativo" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="CONTA_BALANCO" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="7" FIELDLABEL="Conta Balan&#231;o" CTAB="0"/>
        <FIELD NAME="CONTA_DRE" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="6" FIELDLABEL="Conta Dre" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT
  CC2.*,
  MIN(CB.CODIGO)||' - '||MIN(CB.DESCRICAO) AS CONTA_BALANCO,
  MIN(CD.CODIGO)||' - '||MIN(CD.DESCRICAO) AS CONTA_DRE
FROM CONTA_CONTABIL CC1
INNER JOIN #REPLACE(PARENT_RESULT) CC2 ON CC2.CONTA_CONTABIL = CC1.CONTA_CONTABIL
  LEFT JOIN CONTA_BALANCO CB ON  CB.CONTA_BALANCO = CC1.CONTA_BALANCO
  LEFT JOIN CONTA_DRE     CD ON  CD.CONTA_DRE     = CC1.CONTA_DRE
WHERE 1=1
      [AND CB.CONTA_BALANCO=:CONTA_BALANCO]
      [AND CD.CONTA_DRE=:CONTA_DRE]
      [AND CC1.SINTETICA=:SINTETICA]

#SELECT(DEMONSTRATIVO,1:{AND CC1.CONTA_BALANCO IS NOT NULL},
                      2:{AND CC1.CONTA_DRE IS NOT NULL},
                      ELSE:{})

GROUP BY CC1.CONTA_CONTABIL
ORDER BY CC1.CODIGO
;


</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>