<?xml version="1.0"?>
<root>
  <OBJECT NAME="PMZ_SOLICITACAO_CREDITO">
    <METHOD NAME="Listar" DESCRIPTION="Lista Solicita&#231;&#245;es de Credito" VERSION="18" INTFTYPE="5" THREADSAFE="0">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="VENDEDOR" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" LOOKUP="MILLENIUM.FUNCIONARIOS.LISTA_VENDEDORES" LOOKUPKEY="FUNCIONARIO" LOOKUPDISPLAY="NOME" LOOKUPCODE="COD_FUNCIONARIO" FIELDLABEL="Vendedor" CTAB="0"/>
        <PARAM NAME="FILIAL" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" LOOKUP="MILLENIUM.FILIAIS.LISTA_SIMPLES" LOOKUPKEY="FILIAL" LOOKUPDISPLAY="NOME" LOOKUPCODE="COD_FILIAL" FIELDLABEL="Filial" CTAB="0"/>
        <PARAM NAME="CLIENTE" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" LOOKUP="MILLENIUM.CLIENTES.LISTA_FILTROPOPUP" LOOKUPKEY="CLIENTE" LOOKUPDISPLAY="NOME" LOOKUPCODE="COD_CLIENTE" FIELDLABEL="Cliente" CTAB="0"/>
        <PARAM NAME="STATUS" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" LOOKUP="list:'1','AGUARDANDO DEPOSITO';'2','DEPOSITO CONFIRMADO';" FIELDLABEL="Status" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="SOLICITACAO_CREDITO" FORMAT="+" SIZE="8" FLAGS="1024" PROJECTION="0" FIELDLABEL="Solicitacao Credito" CTAB="0"/>
        <FIELD NAME="CODIGO" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="1" FIELDLABEL="Cod Solicitacao Credito" CTAB="0"/>
        <FIELD NAME="CLIENTE" SIZE="255" FLAGS="1" PROJECTION="0" ORDER="4" FIELDLABEL="Cliente" CTAB="0"/>
        <FIELD NAME="VALOR" FORMAT="M" SIZE="17" FLAGS="1" DECIMALS="4" PROJECTION="0" ORDER="7" FIELDLABEL="Valor" CTAB="0"/>
        <FIELD NAME="EMPRESA" SIZE="255" FLAGS="1" PROJECTION="0" ORDER="2" FIELDLABEL="Filial" CTAB="0"/>
        <FIELD NAME="STATUS" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="5" FIELDLABEL="Status" CTAB="0"/>
        <FIELD NAME="USUARIO" SIZE="50" PROJECTION="0" ORDER="6" FIELDLABEL="Usuario" CTAB="0"/>
        <FIELD NAME="VENDEDOR" SIZE="255" FLAGS="1" PROJECTION="0" ORDER="3" FIELDLABEL="Vendedor" CTAB="0"/>
        <FIELD NAME="DATA" FORMAT="H" SIZE="18" PROJECTION="0" FIELDLABEL="Data" CTAB="0"/>
        <FIELD NAME="TITULO" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="6" FIELDLABEL="Titulo" CTAB="0"/>
        <FIELD NAME="FILIAL" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" FIELDLABEL="Filial" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT
PSC.FILIAL                          AS FILIAL,
PSC.SOLICITACAO_CREDITO             AS SOLICITACAO_CREDITO,
PSC.COD_SOLICITACAO_CREDITO 	    AS CODIGO,
F.COD_FILIAL + '-' + F.NOME     	AS EMPRESA,
F2.COD_FUNCIONARIO + '-' + F2.NOME  AS VENDEDOR,
C.COD_CLIENTE + '-' + C.NOME 		AS CLIENTE,
L.N_DOCUMENTO 						AS TITULO,
#TRANSLATE(PSC.STATUS , '1': 'AGUARDANDO DEP&#211;SITO',
                         '2': 'DESPOSITO CONFIRMADO',
                        ELSE: NULL) AS STATUS,
PSC.VALOR 							AS VALOR,
PSC.DATA                            AS DATA,
PSC.USUARIO                         AS USUARIO
FROM pmz_solicitacao_credito psc
INNER JOIN clientes c ON C.CLIENTE =PSC.CLIENTE
INNER JOIN filiais f ON F.FILIAL = PSC.FILIAL
LEFT JOIN lancamentos l ON L.LANCAMENTO = PSC.LANCAMENTO
INNER JOIN funcionarios f2 ON F2.FUNCIONARIO =PSC.VENDEDOR
WHERE [PSC.VENDEDOR=:VENDEDOR] [AND PSC.FILIAL=:FILIAL] [AND PSC.CLIENTE=:CLIENTE]
 [AND PSC.STATUS=:STATUS];
</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>